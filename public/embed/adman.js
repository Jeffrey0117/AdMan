"use strict";(()=>{(function(){let p=document.currentScript;function x(){let t=p?.getAttribute("data-base-url");if(t)return t.replace(/\/+$/,"");let e=p?.getAttribute("src")??"";try{return new URL(e,window.location.href).origin}catch{return""}}let g=x();document.querySelectorAll("[data-adman-id]").forEach(async t=>{let e=t.getAttribute("data-adman-id");if(e)try{let i=await fetch(`${g}/api/serve/${e}`);if(!i.ok)return;let n=await i.json(),r=f(t),o={...n.style,...r},a={...n,style:o};y(t,a)}catch{}});function f(t){let e={backgroundColor:t.getAttribute("data-bg-color")??void 0,textColor:t.getAttribute("data-text-color")??void 0,fontSize:t.getAttribute("data-font-size")??void 0,ctaBackgroundColor:t.getAttribute("data-cta-bg-color")??void 0,ctaTextColor:t.getAttribute("data-cta-text-color")??void 0,borderRadius:t.getAttribute("data-border-radius")??void 0,padding:t.getAttribute("data-padding")??void 0,maxWidth:t.getAttribute("data-max-width")??void 0,textAlign:t.getAttribute("data-text-align")??void 0};return Object.fromEntries(Object.entries(e).filter(([,i])=>i!==void 0))}function s(t){let e=document.createElement("div");return e.textContent=t,e.innerHTML}function u(t){return t.startsWith("http")?t:`${g}${t}`}function h(t){return t?{backgroundImage:`url(${t.startsWith("http")?t:`${g}${t}`})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:{}}function d(t,e){let i={backgroundColor:String(t.backgroundColor),color:String(t.textColor),borderRadius:String(t.borderRadius),padding:String(t.padding),maxWidth:String(t.maxWidth),fontSize:t.fontSize?String(t.fontSize):"16px",fontFamily:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif',boxSizing:"border-box",...h(e)};return t.textAlign&&(i.textAlign=String(t.textAlign)),i}function c(t){let e=t.style;return`<a href="${s(t.ctaUrl)}" target="_blank" rel="noopener noreferrer" style="display:inline-block;background:${e.ctaBackgroundColor};color:${e.ctaTextColor};padding:8px 20px;border-radius:6px;text-decoration:none;font-size:0.875em;font-weight:500;white-space:nowrap">${s(t.ctaText)}</a>`}function m(t){return`<button onclick="this.closest('[data-adman-wrapper]').remove()" style="background:none;border:none;cursor:pointer;font-size:1.125em;line-height:1;opacity:0.7;padding:4px 8px;color:${t}">&#10005;</button>`}function l(t,e,i=""){let n=t.imageUrl;return n?`<img src="${s(u(n))}" alt="" style="max-width:100%;border-radius:4px;margin-bottom:8px;object-fit:cover;max-height:${e};${i}" />`:""}function y(t,e){switch(e.type){case"bottom-banner":return w(t,e);case"top-notification":return k(t,e);case"in-article-banner":return b(t,e);case"modal-popup":return S(t,e);case"sidebar-card":return v(t,e);default:return b(t,e)}}function w(t,e){let i=e.style,n=document.createElement("div");n.setAttribute("data-adman-wrapper",""),Object.assign(n.style,{...d(i,e.backgroundImageUrl),position:"fixed",bottom:"0",left:"0",right:"0",zIndex:String(i.zIndex),display:"flex",alignItems:"center",gap:"16px",boxShadow:"0 -2px 8px rgba(0,0,0,0.15)"});let r="",o=e.imageUrl;o&&(r+=`<img src="${s(u(o))}" alt="" style="width:80px;height:60px;object-fit:cover;border-radius:4px;flex-shrink:0" />`),r+='<div style="flex:1;min-width:0">',r+=`<h3 style="margin:0 0 4px;font-size:1em;font-weight:600">${s(e.headline)}</h3>`;let a=e.bodyText;a&&(r+=`<p style="margin:0;font-size:0.8125em;opacity:0.85;line-height:1.4">${s(a)}</p>`),r+="</div>",r+=c(e),n.innerHTML=r,document.body.appendChild(n)}function k(t,e){let i=e.style,n=document.createElement("div");n.setAttribute("data-adman-wrapper",""),Object.assign(n.style,{...d(i,e.backgroundImageUrl),position:"fixed",top:"0",left:"0",right:"0",zIndex:String(i.zIndex),display:"flex",alignItems:"center",gap:"12px",padding:"10px 16px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"});let r=`<span style="flex:1;font-size:0.875em;font-weight:500">${s(e.headline)}</span>`;r+=c(e).replace("padding:8px 20px","padding:6px 16px").replace("font-size:0.875em","font-size:0.8125em"),r+=m(String(i.textColor)),n.innerHTML=r,document.body.appendChild(n)}function b(t,e){let i=e.style,n=document.createElement("div");n.setAttribute("data-adman-wrapper",""),Object.assign(n.style,{...d(i,e.backgroundImageUrl),boxShadow:"0 1px 3px rgba(0,0,0,0.12)"});let r=l(e,"200px","width:100%");r+=`<h3 style="margin:0 0 6px;font-size:1.125em;font-weight:600">${s(e.headline)}</h3>`;let o=e.bodyText;o&&(r+=`<p style="margin:0 0 12px;font-size:0.875em;opacity:0.85;line-height:1.5">${s(o)}</p>`),r+=c(e),n.innerHTML=r,t.appendChild(n)}function S(t,e){let i=e.style,n=document.createElement("div");n.setAttribute("data-adman-wrapper",""),Object.assign(n.style,{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:String(i.zIndex)});let r=document.createElement("div");Object.assign(r.style,{...d(i,e.backgroundImageUrl),maxWidth:"400px",width:"90%",position:"relative",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"});let o=`<div style="position:absolute;top:8px;right:8px">${m(String(i.textColor))}</div>`;o+=l(e,"180px","width:100%"),o+=`<h3 style="margin:0 0 8px;font-size:1.25em;font-weight:600">${s(e.headline)}</h3>`;let a=e.bodyText;a&&(o+=`<p style="margin:0 0 16px;font-size:0.875em;opacity:0.85;line-height:1.5">${s(a)}</p>`),o+=c(e).replace("display:inline-block","display:block;text-align:center;width:100%"),r.innerHTML=o,n.appendChild(r),n.addEventListener("click",T=>{T.target===n&&n.remove()}),document.body.appendChild(n)}function v(t,e){let i=e.style,n=document.createElement("div");n.setAttribute("data-adman-wrapper",""),Object.assign(n.style,{...d(i,e.backgroundImageUrl),maxWidth:"280px",boxShadow:"0 1px 3px rgba(0,0,0,0.12)"});let r=l(e,"160px","width:100%");r+=`<h3 style="margin:0 0 6px;font-size:1em;font-weight:600">${s(e.headline)}</h3>`;let o=e.bodyText;o&&(r+=`<p style="margin:0 0 12px;font-size:0.8125em;opacity:0.85;line-height:1.4">${s(o)}</p>`),r+=c(e).replace("display:inline-block","display:block;text-align:center;width:100%;font-size:0.8125em"),n.innerHTML=r,t.appendChild(n)}})();})();
