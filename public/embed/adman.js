"use strict";(()=>{(function(){let p=document.currentScript?.getAttribute("data-base-url")??"";document.querySelectorAll("[data-adman-id]").forEach(async e=>{let t=e.getAttribute("data-adman-id");if(t)try{let r=await fetch(`${p}/api/serve/${t}`);if(!r.ok)return;let n=await r.json();b(e,n)}catch{}});function o(e){let t=document.createElement("div");return t.textContent=e,t.innerHTML}function l(e){return e.startsWith("http")?e:`${p}${e}`}function m(e){return e?{backgroundImage:`url(${e.startsWith("http")?e:`${p}${e}`})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:{}}function a(e,t){return{backgroundColor:String(e.backgroundColor),color:String(e.textColor),borderRadius:String(e.borderRadius),padding:String(e.padding),maxWidth:String(e.maxWidth),fontFamily:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif',boxSizing:"border-box",...m(t)}}function d(e){let t=e.style;return`<a href="${o(e.ctaUrl)}" target="_blank" rel="noopener noreferrer" style="display:inline-block;background:${t.ctaBackgroundColor};color:${t.ctaTextColor};padding:8px 20px;border-radius:6px;text-decoration:none;font-size:14px;font-weight:500;white-space:nowrap">${o(e.ctaText)}</a>`}function x(e){return`<button onclick="this.closest('[data-adman-wrapper]').remove()" style="background:none;border:none;cursor:pointer;font-size:18px;line-height:1;opacity:0.7;padding:4px 8px;color:${e}">\u2715</button>`}function g(e,t,r=""){let n=e.imageUrl;return n?`<img src="${o(l(n))}" alt="" style="max-width:100%;border-radius:4px;margin-bottom:8px;object-fit:cover;max-height:${t};${r}" />`:""}function b(e,t){switch(t.type){case"bottom-banner":return h(e,t);case"top-notification":return f(t);case"in-article-banner":return u(e,t);case"modal-popup":return y(t);case"sidebar-card":return w(e,t);default:return u(e,t)}}function h(e,t){let r=t.style,n=document.createElement("div");n.setAttribute("data-adman-wrapper",""),Object.assign(n.style,{...a(r,t.backgroundImageUrl),position:"fixed",bottom:"0",left:"0",right:"0",zIndex:String(r.zIndex),display:"flex",alignItems:"center",gap:"16px",boxShadow:"0 -2px 8px rgba(0,0,0,0.15)"});let i="",s=t.imageUrl;s&&(i+=`<img src="${o(l(s))}" alt="" style="width:80px;height:60px;object-fit:cover;border-radius:4px;flex-shrink:0" />`),i+='<div style="flex:1;min-width:0">',i+=`<h3 style="margin:0 0 4px;font-size:16px;font-weight:600">${o(t.headline)}</h3>`;let c=t.bodyText;c&&(i+=`<p style="margin:0;font-size:13px;opacity:0.85;line-height:1.4">${o(c)}</p>`),i+="</div>",i+=d(t),n.innerHTML=i,document.body.appendChild(n)}function f(e){let t=e.style,r=document.createElement("div");r.setAttribute("data-adman-wrapper",""),Object.assign(r.style,{...a(t,e.backgroundImageUrl),position:"fixed",top:"0",left:"0",right:"0",zIndex:String(t.zIndex),display:"flex",alignItems:"center",gap:"12px",padding:"10px 16px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"});let n=`<span style="flex:1;font-size:14px;font-weight:500">${o(e.headline)}</span>`;n+=d(e).replace("padding:8px 20px","padding:6px 16px").replace("font-size:14px","font-size:13px"),n+=x(String(t.textColor)),r.innerHTML=n,document.body.appendChild(r)}function u(e,t){let r=t.style,n=document.createElement("div");n.setAttribute("data-adman-wrapper",""),Object.assign(n.style,{...a(r,t.backgroundImageUrl),boxShadow:"0 1px 3px rgba(0,0,0,0.12)"});let i=g(t,"200px","width:100%");i+=`<h3 style="margin:0 0 6px;font-size:18px;font-weight:600">${o(t.headline)}</h3>`;let s=t.bodyText;s&&(i+=`<p style="margin:0 0 12px;font-size:14px;opacity:0.85;line-height:1.5">${o(s)}</p>`),i+=d(t),n.innerHTML=i,e.appendChild(n)}function y(e){let t=e.style,r=document.createElement("div");r.setAttribute("data-adman-wrapper",""),Object.assign(r.style,{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:String(t.zIndex)});let n=document.createElement("div");Object.assign(n.style,{...a(t,e.backgroundImageUrl),maxWidth:"400px",width:"90%",position:"relative",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"});let i=`<div style="position:absolute;top:8px;right:8px">${x(String(t.textColor))}</div>`;i+=g(e,"180px","width:100%"),i+=`<h3 style="margin:0 0 8px;font-size:20px;font-weight:600">${o(e.headline)}</h3>`;let s=e.bodyText;s&&(i+=`<p style="margin:0 0 16px;font-size:14px;opacity:0.85;line-height:1.5">${o(s)}</p>`),i+=d(e).replace("display:inline-block","display:block;text-align:center;width:100%"),n.innerHTML=i,r.appendChild(n),r.addEventListener("click",c=>{c.target===r&&r.remove()}),document.body.appendChild(r)}function w(e,t){let r=t.style,n=document.createElement("div");n.setAttribute("data-adman-wrapper",""),Object.assign(n.style,{...a(r,t.backgroundImageUrl),maxWidth:"280px",boxShadow:"0 1px 3px rgba(0,0,0,0.12)"});let i=g(t,"160px","width:100%");i+=`<h3 style="margin:0 0 6px;font-size:16px;font-weight:600">${o(t.headline)}</h3>`;let s=t.bodyText;s&&(i+=`<p style="margin:0 0 12px;font-size:13px;opacity:0.85;line-height:1.4">${o(s)}</p>`),i+=d(t).replace("display:inline-block","display:block;text-align:center;width:100%;font-size:13px"),n.innerHTML=i,e.appendChild(n)}})();})();
